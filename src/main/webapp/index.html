<!DOCTYPE html>
<html>
<head>
    <title>Votación mejor jugador liga ACB</title>
</head>
<body>
    <center><h1>Votación al mejor jugador de la liga ACB test 1234</h1></center>
    <hr>

    <form id="voteForm" action="/Acb" method="POST">
        <p align="left">Nombre del Visitante: <input type="text" size="20" name="txtNombre">
            eMail: <input type="text" size="20" name="txtMail"></p>
        <h2>MADRID:</h2>
        
        <div>
            <img src="Llull.jpg" width="100" height="67" alt="Llul"/>
            <label>
                <input type="radio" name="R1" value="Llull"> Llull
            </label>
        </div>
        
        <div>
            <img src="Rudy.jpg" width="100" height="67" alt="Rudy"/>
            <label>
                <input type="radio" name="R1" value="Rudy"> Rudy
            </label>
        </div>
        
        <div>
            <img src="Tavares.jpg" width="100" height="67" alt="Tavares"/>
            <label>
                <input type="radio" name="R1" value="Tavares"> Tavares
            </label>
        </div>
        
        <br>
        <p align="left"><input type="radio" name="R1" value="Otros">Otro
            <input type="text" size="20" name="txtOtros"></p>
        <p align="left">
            <input type="submit" name="B1" value="Votar">
            <input type="reset" name="B2" value="Reset">
        </p>
    </form>

    <!-- View Votes Button -->
    <form action="ViewVotes.jsp" method="GET">
        <p><input type="submit" value="Ver Votos"></p>
    </form>

    <!-- Reset Votes Button -->
    <form action="ResetVotes" method="POST">
        <p><input type="submit" value="Poner votos a cero"></p>
    </form>

    <script>
        document.getElementById('voteForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
            
            // Remove any previously selected player vote before submitting the form
            var selectedPlayer = document.querySelector('input[name="R1"]:checked');
            if (selectedPlayer) {
                selectedPlayer.checked = false; // Uncheck the selected radio button
            }
            
            // Get the selected player
            var selectedPlayerValue = selectedPlayer ? selectedPlayer.value : '';
            
            // Open a new tab and display the confirmation message
            var confirmationMessage = selectedPlayerValue ? 'Voto registrado para ' + selectedPlayerValue : 'Por favor seleccione un jugador para votar.';
            var confirmationPage = window.open('', '_blank');
            confirmationPage.document.write('<h2>' + confirmationMessage + '</h2>');
            confirmationPage.document.close();
            
            // Submit the form
            this.submit();
        });
    </script>
</body>
</html>
